<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>UtilidadesFecha.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;DS-34-11-B1&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">ejercicio2</a> &gt; <span class="el_source">UtilidadesFecha.java</span></div><h1>UtilidadesFecha.java</h1><pre class="source lang-java linenums">package ejercicio2;

/**
 * @author p.costa (Pablo Costa Oubiña)
 * @author pablo.aragunde (Pablo Aragunde Canabal)
 */
<span class="nc" id="L7">public class UtilidadesFecha {</span>

    /**
     * Indica si un año es bisiesto o no. Un año es bisiesto si es divisible
     * entre 4, a no ser que que sea divisible entre 100, en cuyo caso debería
     * ser divisible entre 400 para ser bisiesto (1900 no es bisiesto pero el
     * año 2000 sí)
     *
     * @param anho
     * @return boolean si es bisiesto
     */
    public static boolean esBisiesto(int anho) {
<span class="fc bfc" id="L19" title="All 6 branches covered.">        return anho % 4 == 0 &amp;&amp; (!(anho % 100 == 0) || anho % 400 == 0);</span>
    }

    /**
     * Indica el número de días de un mes. Como el número de días de febrero
     * depende del año habrá que pasarle también el año.
     *
     * @param mes
     * @param anho
     * @return
     * @throws IllegalArgumentException
     */
    public static int diasMes(int mes, int anho) throws IllegalArgumentException {
<span class="fc bfc" id="L32" title="All 4 branches covered.">        switch (mes) {</span>
            //meses de 31 días
            case (1):
            case (3):
            case (5):
            case (7):
            case (8):
            case (10):
            case (12):
<span class="fc" id="L41">                return 31;</span>
            //meses de 30 días
            case (4):
            case (6):
            case (9):
            case (11):
<span class="fc" id="L47">                return 30;</span>
            //febrero
            case (2):
<span class="fc bfc" id="L50" title="All 2 branches covered.">                return esBisiesto(anho) ? 29 : 28;</span>
            //meses erróneos, e.g.: 13, -4.
            default:
<span class="fc" id="L53">                throw new IllegalArgumentException(&quot;El mes &quot; + mes + &quot; no existe&quot;);</span>
        }
    }

    /**
     * El formato de fecha ISO es un formato estándar que representa las fechas
     * situando primero el año, luego el mes y por último el día: AAAA/MM/DD En
     * dicho formato, por ejemplo, el 28 de julio de 2006 se representará como
     * 2006-07-28. El método convertirISO convierte una fecha en formato
     * habitual de DD de MM de AAAA a su representación en formato ISO. Para
     * simplificar las cosas podemos suponer que el formato habitual que le va-
     * mos a pasar es correcto, aunque la fecha puede ser incorrecta, por ejem-
     * plo, podemos pasarle el 31 de Febrero. 21 de Septiembre de 2002
     *
     * @param textoFecha fecha en formato &quot;DD de [mes] de AAAA&quot;
     * @return String fecha en formato ISO
     * @throws IllegalArgumentException si el mes indicado no existe
     */
    public static String convertirISO(String textoFecha) throws IllegalArgumentException {
<span class="fc bfc" id="L72" title="All 2 branches covered.">        if (textoFecha != null) {</span>
            String convertedString;
<span class="fc" id="L74">            String mes = new String();</span>
<span class="fc" id="L75">            String[] split = textoFecha.split(&quot; de &quot;);</span>
<span class="pc bpc" id="L76" title="12 of 50 branches missed.">            switch (split[1].toLowerCase()) {</span>
                case (&quot;enero&quot;):
<span class="fc" id="L78">                    mes = &quot;01&quot;;</span>
<span class="fc" id="L79">                    break;</span>
                case (&quot;febrero&quot;):
<span class="fc" id="L81">                    mes = &quot;02&quot;;</span>
<span class="fc" id="L82">                    break;</span>
                case (&quot;marzo&quot;):
<span class="fc" id="L84">                    mes = &quot;03&quot;;</span>
<span class="fc" id="L85">                    break;</span>
                case (&quot;abril&quot;):
<span class="fc" id="L87">                    mes = &quot;04&quot;;</span>
<span class="fc" id="L88">                    break;</span>
                case (&quot;mayo&quot;):
<span class="fc" id="L90">                    mes = &quot;05&quot;;</span>
<span class="fc" id="L91">                    break;</span>
                case (&quot;junio&quot;):
<span class="fc" id="L93">                    mes = &quot;06&quot;;</span>
<span class="fc" id="L94">                    break;</span>
                case (&quot;julio&quot;):
<span class="fc" id="L96">                    mes = &quot;07&quot;;</span>
<span class="fc" id="L97">                    break;</span>
                case (&quot;agosto&quot;):
<span class="fc" id="L99">                    mes = &quot;08&quot;;</span>
<span class="fc" id="L100">                    break;</span>
                case (&quot;septiembre&quot;):
<span class="fc" id="L102">                    mes = &quot;09&quot;;</span>
<span class="fc" id="L103">                    break;</span>
                case (&quot;octubre&quot;):
<span class="fc" id="L105">                    mes = &quot;10&quot;;</span>
<span class="fc" id="L106">                    break;</span>
                case (&quot;noviembre&quot;):
<span class="fc" id="L108">                    mes = &quot;11&quot;;</span>
<span class="fc" id="L109">                    break;</span>
                case (&quot;diciembre&quot;):
<span class="fc" id="L111">                    mes = &quot;12&quot;;</span>
<span class="fc" id="L112">                    break;</span>
                default:
<span class="fc" id="L114">                    throw new IllegalArgumentException(&quot;El mes &quot; + split[1]</span>
                            + &quot; no existe&quot;);
            }
<span class="fc" id="L117">            convertedString = split[2] + &quot;/&quot; + mes + &quot;/&quot; + split[0];</span>
<span class="fc" id="L118">            return convertedString;</span>
        } else {
<span class="fc" id="L120">            throw new IllegalArgumentException(&quot;EL argumento proporcionado es&quot;</span>
                    + &quot; null&quot;);
        }
    }

    /**
     * Dado un String que representa una fecha en formato ISO comprueba que es
     * una fecha correcta. Por fecha correcta entendemos que no existan letras
     * ni caracteres extraños en la fecha, que tenga la longitud adecuada y que
     * la fecha representada sea válida, es decir, que se tenga en cuenta el
     * número de días en cada mes.
     *
     * @param fechaISO la fecha en formato ISO
     * @return boolean true si la fecha está en formato ISO, false en caso
     * contrario
     */
    public static boolean comprobarFechaISO(String fechaISO) {
<span class="fc bfc" id="L137" title="All 2 branches covered.">        if (fechaISO.matches(&quot;[0-9]{4}\\/[01][0-9]\\/[0-3][0-9]&quot;)) {</span>
<span class="fc" id="L138">            String[] split = fechaISO.split(&quot;/&quot;);</span>
<span class="fc" id="L139">            int anho = Integer.parseInt(split[0]);</span>
<span class="fc" id="L140">            int mes = Integer.parseInt(split[1]);</span>
<span class="fc" id="L141">            int dia = Integer.parseInt(split[2]);</span>
<span class="fc bfc" id="L142" title="All 4 branches covered.">            return (dia &gt; 0 &amp;&amp; dia &lt;= diasMes(mes, anho));</span>
        } else {
<span class="fc" id="L144">            return false;</span>
        }

    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>